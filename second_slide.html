
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction</title>

    <body bgcolor="#D3D3D3"></body>

    <style>

        .box {
            background-color: darkgrey;
            width: 800px;
            height: 800px;
            float: left;
            position:absolute;
           /* top: 200; /*[wherever you want it]*/
            /*left:100; /*[wherever you want it]*/

        }

        .right_textbar {
            width: 30%;
            float: right;
        }


        .post {
            margin-top: 0.5em;
            margin-left: 2em;
            margin-right: 2em;
            text-align: center;
        }

        .post p{
            max-width: 5000px;
            padding: .5em;
            text-align: justify;
            margin: 0;
            top: 1.25em;
        }

        .post h1{
            text-align: center;
        }

        .as-console-wrapper { max-height: 3.5em !important; }

    </style>
</head>


<div class="post">  
    <h1>1985 A Critical Year In Automotive Technology</h1>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam dapibus id nisl ut suscipit. Nullam vel justo tellus. Suspendisse vehicula rhoncus nunc sed accumsan. In hac habitasse platea dictumst. Mauris vel dolor velit. Phasellus finibus massa mauris, at interdum nisl luctus at. Etiam porttitor, metus non dapibus pretium, orci arcu pretium nulla, eget congue augue libero at lectus. Mauris pretium urna tristique, laoreet enim rhoncus, euismod tortor.</p>
   </div>




<div class="right_textbar">
    <h2>Introduction</h2>
    <p>
            With the introduction of emmission controls and the Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam dapibus id nisl ut suscipit. Nullam vel justo tellus. Suspendisse vehicula rhoncus nunc sed accumsan. In hac habitasse platea dictumst. Mauris vel dolor velit. Phasellus finibus massa mauris, at interdum nisl luctus at. Etiam porttitor, metus non dapibus pretium, orci arcu pretium nulla, eget congue augue libero at lectus. Mauris pretium urna tristique, laoreet enim rhoncus, euismod tortor. 
    </p>
    <h3>Fuel Efficiency</h3>
    <p>
        more studd
    </p>
    <button type="button" onclick="window.location.href='http://franknsalamone.github.io/second_graph.html'">Fuel Efficiency</button>
    <h3>Induction Technology</h3>
    <p>
        more studd
    </p>
    <button type="button" onclick="window.location.href='http://www.google.com/'">Induction Technology</button>
    <h3>Body Styles</h3>
    <p>
        more studd
    </p>
    <button type="button" onclick="window.location.href='http://www.google.com/'">Other Innovations</button>
</div>

<body>

    
    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v6.js"></script>

    <!-- Create a div where the graph will take place -->
    <div id="my_dataviz" class = "box"></div>

    <script>
        // https://stackoverflow.com/questions/13425833/how-can-i-change-the-pages-url-when-a-visitor-clicks-a-button
        // Code references: https://d3-graph-gallery.com/graph/scatter_basic.html\
        //https://stackoverflow.com/questions/11189284/d3-axis-labeling
    
        var seventies_on = false;

        // set the dimensions and margins of the graph
        const margin = {top: 50, right: 50, bottom: 50, left: 60},
            width = 800 - margin.left - margin.right,
            height = 800 - margin.top - margin.bottom;
    
        // append the svg object to the body of the page
        const svg = d3.select("#my_dataviz")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left}, ${margin.top})`)
            .attr("id", "mySVG") ;
    
        //Read the data
        d3.csv("https://franknsalamone.github.io/autos_fixed.csv").then( function(data) {
        
 
        // Add X axis
        const x = d3.scaleLinear()
            .domain([5,60])
            .range([ 0, width ]);
        svg.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(x));
    
        // Add Y axis
        const y = d3.scaleLinear()
            .domain([20, 300])
            .range([ height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y));


            var rect = d3.select('svg g rect');


        //Tooltip reference https://d3-graph-gallery.com/graph/scatter_tooltip.html
        const tooltip = d3.select("#my_dataviz")
            .append("div")
            .style("opacity", 0)
            .attr("class", "tooltip")
            .style("background-color", "white")
            .style("border", "solid")
            .style("border-width", "1px")
            .style("border-radius", "5px")
            .style("padding", "10px")        
            .style("position", "absolute")
    
        const mouseover = function(event, d) {
            tooltip
            .style("opacity", 1)
        }

        const mousemove = function(event, d) {
            tooltip
            .html(`Make: ${d.make}`)
            .style("left", (event.x)/2 + "px") // It is important to put the +90: other wise the tooltip is exactly where the point is an it creates a weird effect
            .style("top", (event.y)/2 + "px")
        }

        // A function that change this tooltip when the leaves a point: just need to set opacity to 0 again
        const mouseleave = function(event,d) {
            tooltip
            .transition()
            .duration(200)
            .style("opacity", 0)
        }

         svg.append("text")
            .attr("class", "x label")
            .attr("text-anchor", "end")
            .attr("x", 40+((width)/2))
            .attr("y", height + 40)
            .text("MPG");

         svg.append("text")
            .attr("class", "y label")
            .attr("text-anchor", "end")
            .attr("y", 6)
            .attr("x", "-20em")
            .attr("dy", "-3em")
            .attr("transform", "rotate(-90)")
            .text("Horsepower");
        

        //Code reference for buttons: https://stackoverflow.com/questions/27009672/adding-a-button-to-a-g-element-using-d3
        svg.append("rect")
            .attr("width", 40)
            .attr("height", 40)
            .attr("x", 530)
            .attr("y", 60)
            .attr("fill",  "#21908dff");

        svg.append("text")
            .attr("class", "add")
            .text("Add 1970s")
            .attr("x", 580)
            .attr("y", 85)
            .style("opacity", 1);
        
        svg.append("text")
            .attr("class", "rem")
            .text("Remove 1970s")
            .attr("x", 580)
            .attr("y", 85)
            .style("opacity", 0);

        //Code reference for selecting specific classes: https://d3-graph-gallery.com/graph/scatter_grouped_highlight.html
        var rect = d3.select('svg g rect');
            rect.on('click', function() {
            if (seventies_on == false){
                d3.selectAll(".seventies")
                    .style("fill-opacity", 1);
                d3.select(".add")
                    .style("opacity", 0);
                d3.select(".rem")
                    .style("opacity", 1);
                seventies_on = true;
            }
            else{
                d3.selectAll(".seventies")
                    .style("fill-opacity", 0);
                d3.select(".add")
                    .style("opacity", 1);
                d3.select(".rem")
                    .style("opacity", 0);
                seventies_on = false;
            }
        });


        // Add dots
        svg.append('g')
            .selectAll("dot")
            .data(data)
            .enter()
            .append("circle")
                .attr("class", function(d){
                    if (d.Decade == '80'){
                         classit = "eighties";
                    }
                    else{
                         classit = "seventies";
                    }
                    return (classit); 
                })
                .attr("cx", function (d) { return x(d.highway); } )
                .attr("cy", function (d) { return y(d.horsepower); } )
                .attr("r", 7)
                .on("mouseover", mouseover )
                .on("mousemove", mousemove )
                .on("mouseleave", mouseleave )
                .style("fill", function (d) { 
                    //if (d.aspiration == 'turbo'){
                     //    colorit = "#440154ff";
                    //}
                    //else{
                    //     colorit = "#21908dff";
                   // }
                    if (d.Decade == "70"){
                        colorit = "#21908dff"
                    }
                    else{
                        colorit = "#440154ff"  
                    }
                    return (colorit); })
                // .attr("stroke-width", 3)
                // .style("stroke", function (d) { 
                //     if (d.type == 'dohc'){
                //         colorit = "#fde725ff";
                //     }
                //     else{
                //         colorit = "";
                //     }
                //     return (colorit); })
               
            //ode reference for opacity: https://stackoverflow.com/questions/15988455/how-can-i-change-the-radius-and-opacity-of-a-circle-in-d3
            d3.selectAll(".seventies")
                .style("fill-opacity", 0)
                
        })
  
    

    </script>
</body>
</html>
